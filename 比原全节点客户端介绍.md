#  比原全节点介绍

全节点，又称为完整客户端，是存储比原链所有交易历史的客户端，并管理用户钱包，全节点可以在比原网络上直接开始交易，不依赖于任何其他服务器或者第三方服务。
go语言全节点项目地址：https://github.com/Bytom/bytom

## 全节点功能分层

全节点主要分为两层

 - 钱包层
 - 内核层
 - 通信层（P2P）

钱包层提供账户管理，资产管理，密钥管理和交易等功能，用户可以使用GUI界面或者调用CLI接口来执行相关的操作。

内核层维护最核心的区块，共识，UTXO等功能。

通信层提供基础的P2P网络通信，区块同步等功能。

## 全节点基础概念介绍

### 总览

- 密钥
- 账户
- 资产
- 交易
- 未花费输出（UTXO）

### 密钥

公私钥体系是区块链最重要的授权机制，私钥控制所有的资产发布和转移，每笔交易都会使用特定的私钥进行签名。会使用前一笔未花费交易的公钥来验证这笔交易的有效性。
一个账户或者一笔交易可以只使用一个密钥进行签名，也可以使用多个密钥签名。
私钥一般都是在一个硬件安全模块中，并且从不离开，而公钥则暴露在外面，为了进行资产交易，交易都会被传输到HSM中被签名，从而防止私钥被暴露。

### 账户

账户是资产的所有者对象，账户包含一个或者多个密钥，账户通过这些密钥来控制资产（由控制程序来控制资产，使用密钥进行加锁或者解锁）。
你的账户余额是你所有未花费输出的总和，当你需要花费你的余额时，你的账户会查找所有的未花费输出。

### 资产

资产是一类可以在区块链上发布的数据类型，它可以对应虚拟世界的资产，也可以对应物理世界中的资产，任何资产都可以在两个账户之间转移而不需要发行者的许可。
每个资产通过发行程序来获得一个全局唯一的ID，当资产创建时比原核心会自动创建发布程序。发行程序可以添加一些限制，包括什么时间，谁可以发布新的资产。

### 交易

比原的交易使用的BUTXO模型，比原的交易不是账户余额的增减，而是对比原币或者其他资产转移的授权，每一笔交易的输入来自于上一笔交易的输出。

每一笔交易包含一个或多个输入，包含一个或多个输出。
每一笔输入可以发布一个新的资产或者转移已有的资产，每一笔输出从输入获得资产并定义如何分配或者销毁。

### 创建交易

1.交易构建：定义交易是怎么样的：发布一笔新资产；或者从哪个账户花费；或者被哪个账户控制。API接口 build-transaction，代码[api/transact.go#L120](https://github.com/Bytom/bytom/blob/master/api/transact.go#L120)

2.交易签名：使用私钥授权资产的转移或者发行。API接口 sign-transaction，代码[api/hsm.go#L53](https://github.com/Bytom/bytom/blob/master/api/hsm.go#L53)

3.交易提交：提交一个完整并被授权的交易到区块链上。API接口 submit-transaction，代码[api/transact.go#L135](https://github.com/Bytom/bytom/blob/master/api/transact.go#L135)

### 未花费输出





## 其他

内核层和通信层功能较为复杂，将不在这边做详细介绍

## 贡献

欢迎给比原社区贡献，可以在Github上发起issue，提交建议和features。

如果你可以贡献代码，那么fork比原分支，修复和提交PR，比原的核心开发者会审核并合并代码。

PR建议从 `dev`分支克隆 ，好的PR会有比原进行奖励。

更多问题请添加微信：matrix2140。